<html>
    <head>
        <meta charset=utf-8 />
        <title>Javascript Selection API Example</title>
        <!-- By Losses Don -->
        <style>
            ul{
                border:1px solid rgba(0, 124, 201, 0.2);
                padding:5px;
                list-style:none;
            }
            ul *{
                padding:5px;
                margin:5px;
            }
            ul>li{
                border:1px solid rgba(0, 124, 201, 0.5);
            }
            ul>li>div{
                border:1px solid rgba(0, 124, 201, 0.9);
            }
            #Result{
                border:1px solid rgba(0, 124, 201, 0.9);
                padding:15px;
            }
        </style>
        <script>
            function M1() {
                document.getElementById("Result").innerHTML = window.getSelection();
            }
            function M2() {
                var selection = window.getSelection();
                selection.collapseToStart();
            }
            function M3() {
                var selection = window.getSelection();
                selection.collapseToEnd();
            }
            function M4() {
                var selection = window.getSelection();
                selection.selectAllChildren();
            }
            function M5() {
                var strongs = document.getElementsByTagName("strong");
                var s = window.getSelection();

                if (s.rangeCount > 0)
                    s.removeAllRanges();

                for (var i = 0; i < strongs.length; i++) {
                    var range = document.createRange();
                    range.selectNode(strongs[i]);
                    s.addRange(range);
                }
            }
            function M6() {
                s = window.getSelection();
                if (s.rangeCount > 1) {
                    for (var i = 1; i < s.rangeCount; i++) {
                        s.removeRange(s.getRangeAt(i));
                    }
                }
            }
            function M7() {
                var selection = window.getSelection();
                selection.deleteFromDocument();
            }
            function M8() {
                var selection = window.getSelection();
                document.getElementById("Result").innerHTML = selection.containsNode(document.body, false);
            }
            function N1() {
                var select = window.getSelection();
                document.getElementById("Result").innerHTML = select.isCollapsed;
            }
            function N2() {
                var select = window.getSelection();
                document.getElementById("Result").innerHTML = select.rangeCount;
            }
            /*
             function N3() {
             var selection = window.getSelection()
             ranges = [];
             for (var i = 0; i < selection.rangeCount; i++) {
             ranges.push(selection.getRangeAt(i));
             }
             document.getElementById("Result").innerHTML = "Saved the selection";
             }
             function N4() {
             var newSelection = getSelection();
             ranges.forEach(function(e) {
             newSelection.addRange(e);
             });
             document.getElementById("Result").innerHTML = "Selection Replaced";
             }
             */
            function N3() {
                var selection = getSelection();
                collapsed = selection.isCollapsed;
                anchorNode = selection.anchorNode;
                anchorOffset = selection.anchorOffset;
                ranges = [];
                for (var i = 0; i < selection.rangeCount; i++)
                    ranges.push(selection.getRangeAt(i));
                document.getElementById("Result").innerHTML = "Saved the selection";
            }
            function N4() {
                if (collapsed)
                    getSelection().collapse(anchorNode, anchorOffset);
                else
                    var selection = getSelection();
                ranges.forEach(function(e) {
                    selection.addRange(e);
                });
                document.getElementById("Result").innerHTML = "Selection Replaced";
            }
        </script>
    </head>
    <body>
        <div>
            <button onclick="M1();">toString</button>
            <button onclick="M2();">collapseToStart</button>
            <button onclick="M3();">collapseToEnd</button>
            <button onclick="M4();">selectAllChildren</button>
            <button onclick="M5();">addRange</button>
            <button onclick="M6();">removeRange</button>
            <button onclick="M7();">deleteFromDocument</button>
            <button onclick="M8();">containsNode</button>
            <br />
            <button onclick="N1();">isCollapsed</button>
            <button onclick="N2();">rangeCount</button>
            <br />
            <button onclick="N3();">Get the range</button>
            <button onclick="N4();">Relese the range</button>
            <button onclick="N5();">rangeCount</button>
        </div>
        <ul>
            <li>
                <div>Hello, world!</div>
                <div>Example</div>
                <div><strong>Example</strong></div>
                <div>Example</div>
                <div><img src="http://s.tankr.net/wp-content/themes/egg/images/logo-2014-2.gif" alt="Jandan" /></div>
            </li>
            <li contentEditable="">
                <div>You can edit <strong>any</strong> items in this list.</div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
            <li>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
                <div></div>
            </li>
        </ul>
        <div id="Result"></div>
    </body>
</html>